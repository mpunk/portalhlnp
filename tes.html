<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Anggaran dan Realisasi</title>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fc;
      margin: 0;
      padding: 20px;
    }

    .section-title {
      text-align: center;
      margin-bottom: 30px;
    }

    .chart-wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .chart-box {
      background-color: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      flex: 1 1 600px;
      max-width: 1000px;
    }

    h2 {
      color: #343a40;
    }

    p {
      color: #6c757d;
    }

    #pie-chart, #bar-chart, #horizontal-bar-chart {
      width: 100%;
      height: 450px;
    }
  </style>
</head>
<body>

<section id="stats" class="stats section">
  <div class="section-title">
    <h2>Anggaran dan Realisasi</h2>
    <p>Tahun 2025</p>
    <p>Total Pagu: <strong>Rp13.100.100.000,-</strong></p>
  </div>

  <div class="chart-wrapper">
    <!-- Pie Chart -->
    <div class="chart-box">
      <div id="pie-chart"></div>
    </div>

    <!-- Bar Chart -->
    <div class="chart-box">
      <div id="bar-chart"></div>
    </div>

    <!-- Horizontal Bar Chart -->
    <div class="chart-box">
      <div id="horizontal-bar-chart"></div>
    </div>
  </div>
</section>

<script>
  const totalPagu = 13100100000;
  const realisasi = 3967912780;
  const blokir = 3740953000;
  const sisa = totalPagu - realisasi - blokir;

  // PIE CHART
  Highcharts.chart('pie-chart', {
    chart: {
      type: 'pie',
      backgroundColor: 'transparent'
    },
    title: {
      text: 'Distribusi Realisasi, Blokir, dan Sisa Anggaran'
    },
    tooltip: {
      pointFormat: '{series.name}: <b>Rp{point.y:,.0f}</b> ({point.percentage:.1f}%)'
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: 'pointer',
        dataLabels: {
          enabled: true,
          format: '{point.name}: {point.percentage:.1f} %',
          distance: 30
        }
      }
    },
    credits: {
      enabled: false
    },
    series: [{
      name: 'Anggaran',
      colorByPoint: true,
      data: [
        { name: 'Realisasi', y: realisasi, color: '#4e73df' },
        { name: 'Blokir', y: blokir, color: '#e74a3b' },
        { name: 'Sisa Anggaran', y: sisa, color: '#36b9cc' }
      ]
    }]
  });

  // BAR CHART (Realisasi Per Bulan)
  const realisasiBulanan = [
    200000000, 250000000, 300000000, 350000000,
    400000000, 450000000, 400000000, 350000000,
    300000000, 250000000, 200000000, 180000000
  ];

  Highcharts.chart('bar-chart', {
    chart: {
      type: 'column',
      backgroundColor: 'transparent'
    },
    title: {
      text: 'Realisasi Anggaran Per Bulan - Tahun 2025'
    },
    xAxis: {
      categories: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'],
      crosshair: true
    },
    yAxis: {
      title: {
        text: 'Jumlah (Rp)'
      },
      labels: {
        formatter: function () {
          return 'Rp' + this.value.toLocaleString();
        }
      }
    },
    tooltip: {
      pointFormat: 'Realisasi: <b>Rp{point.y:,.0f}</b>'
    },
    plotOptions: {
      column: {
        borderRadius: 5,
        pointPadding: 0.1,
        groupPadding: 0.1,
        dataLabels: {
          enabled: true,
          format: 'Rp{y:,.0f}',
          allowOverlap: true,
          crop: false,
          overflow: 'none'
        }
      }
    },
    legend: {
      enabled: false
    },
    credits: {
      enabled: false
    },
    series: [{
      data: realisasiBulanan,
      color: '#1cc88a'
    }]
  });

  // HORIZONTAL BAR CHART
  Highcharts.chart('horizontal-bar-chart', {
    chart: {
      type: 'bar',
      backgroundColor: 'transparent'
    },
    title: {
      text: 'Perbandingan Anggaran'
    },
    xAxis: {
      categories: ['Realisasi', 'Blokir', 'Sisa'],
      title: {
        text: null
      }
    },
    yAxis: {
      min: 0,
      title: {
        text: 'Jumlah (Rp)',
        align: 'high'
      },
      labels: {
        overflow: 'justify',
        formatter: function () {
          return 'Rp' + this.value.toLocaleString();
        }
      }
    },
    tooltip: {
      valuePrefix: 'Rp',
      valueDecimals: 0
    },
    plotOptions: {
      bar: {
        dataLabels: {
          enabled: true,
          format: 'Rp{y:,.0f}'
        }
      }
    },
    legend: {
      enabled: false
    },
    credits: {
      enabled: false
    },
    series: [{
      name: 'Anggaran',
      data: [
        { y: realisasi, color: '#4e73df' },
        { y: blokir, color: '#e74a3b' },
        { y: sisa, color: '#36b9cc' }
      ]
    }]
  });
</script>

</body>
</html>
